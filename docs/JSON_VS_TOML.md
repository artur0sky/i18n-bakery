# JSON vs TOML Format Comparison

This document provides a visual comparison between JSON and TOML formats for i18n-bakery translation files.

## Simple Translation

### JSON Format

```json
{
  "greeting": {
    "variants": {
      "default": {
        "value": "Hello",
        "variables": [],
        "autoGenerated": true,
        "timestamp": 1234567890
      }
    }
  }
}
```

### TOML Format

```toml
[greeting.variants.default]
value = "Hello"
variables = []
autoGenerated = true
timestamp = 1234567890
```

**Difference**: TOML is more concise and readable with less visual noise.

---

## Translation with Variables

### JSON Format

```json
{
  "greeting": {
    "variants": {
      "name": {
        "value": "Hello, {{name}}!",
        "variables": ["name"],
        "autoGenerated": false
      }
    }
  }
}
```

### TOML Format

```toml
[greeting.variants.name]
value = "Hello, {{name}}!"
variables = ["name"]
autoGenerated = false
```

**Difference**: TOML eliminates curly braces and quotes for keys, making it cleaner.

---

## Multiple Variants

### JSON Format

```json
{
  "meal": {
    "variants": {
      "default": {
        "value": "{{meal}}",
        "variables": ["meal"]
      },
      "meal_price": {
        "value": "{{meal}} - ${{price}}",
        "variables": ["meal", "price"]
      }
    }
  }
}
```

### TOML Format

```toml
[meal.variants.default]
value = "{{meal}}"
variables = ["meal"]

[meal.variants.meal_price]
value = "{{meal}} - ${{price}}"
variables = ["meal", "price"]
```

**Difference**: TOML uses blank lines to separate sections, improving readability.

---

## Complex Structure

### JSON Format

```json
{
  "home": {
    "variants": {
      "default": {
        "value": "Home",
        "variables": []
      }
    }
  },
  "orders": {
    "variants": {
      "default": {
        "value": "Orders",
        "variables": []
      },
      "count": {
        "value": "{{count}} orders",
        "variables": ["count"]
      }
    }
  },
  "cart": {
    "variants": {
      "default": {
        "value": "Cart",
        "variables": []
      },
      "items": {
        "value": "{{count}} items",
        "variables": ["count"]
      },
      "items_total": {
        "value": "{{count}} items - ${{total}}",
        "variables": ["count", "total"]
      }
    }
  }
}
```

### TOML Format

```toml
[home.variants.default]
value = "Home"
variables = []

[orders.variants.default]
value = "Orders"
variables = []

[orders.variants.count]
value = "{{count}} orders"
variables = ["count"]

[cart.variants.default]
value = "Cart"
variables = []

[cart.variants.items]
value = "{{count}} items"
variables = ["count"]

[cart.variants.items_total]
value = "{{count}} items - ${{total}}"
variables = ["count", "total"]
```

**Difference**: TOML's table headers make it easier to scan and locate specific translations.

---

## With Comments

### JSON Format

```json
{
  "// Note": "JSON doesn't support comments natively",
  "greeting": {
    "variants": {
      "default": {
        "value": "Hello",
        "variables": []
      }
    }
  }
}
```

### TOML Format

```toml
# This is a proper comment in TOML
# You can add notes and documentation

[greeting.variants.default]
value = "Hello"
variables = []

# Another comment explaining the next section
```

**Difference**: TOML has native comment support with `#`, while JSON requires workarounds.

---

## Special Characters

### JSON Format

```json
{
  "message": {
    "variants": {
      "default": {
        "value": "Line 1\nLine 2\tTabbed\r\nWindows\"Quoted\"\\Backslash",
        "variables": []
      }
    }
  }
}
```

### TOML Format

```toml
[message.variants.default]
value = "Line 1\nLine 2\tTabbed\r\nWindows\"Quoted\"\\Backslash"
variables = []
```

**Difference**: Both formats handle special characters similarly with escape sequences.

---

## Flat Structure Comparison

### JSON Flat

```json
{
  "home.title": "Home Page",
  "home.subtitle": "Welcome",
  "orders.title": "Orders",
  "orders.subtitle": "Your orders"
}
```

### TOML Flat

```toml
"home.title" = "Home Page"
"home.subtitle" = "Welcome"
"orders.title" = "Orders"
"orders.subtitle" = "Your orders"
```

**Difference**: TOML flat structure is more concise without curly braces.

---

## Nested Structure Comparison

### JSON Nested

```json
{
  "home": {
    "title": "Home Page",
    "subtitle": "Welcome"
  },
  "orders": {
    "title": "Orders",
    "subtitle": "Your orders"
  }
}
```

### TOML Nested

```toml
[home]
title = "Home Page"
subtitle = "Welcome"

[orders]
title = "Orders"
subtitle = "Your orders"
```

**Difference**: TOML nested structure uses table headers, making hierarchy clearer.

---

## File Size Comparison

For the same content:

| Format | Size      | Difference |
| ------ | --------- | ---------- |
| JSON   | 245 bytes | Baseline   |
| TOML   | 198 bytes | **-19%**   |

**Note**: TOML is typically 15-25% smaller than JSON for translation files due to less syntax overhead.

---

## Readability Comparison

### JSON

- ✅ Widely known format
- ✅ Great for APIs and data exchange
- ❌ Lots of visual noise (braces, quotes, commas)
- ❌ No comment support
- ❌ Trailing comma errors

### TOML

- ✅ Clean, minimal syntax
- ✅ Native comment support
- ✅ Better for human editing
- ✅ No trailing comma issues
- ✅ Explicit types
- ❌ Less common than JSON
- ❌ Requires TOML parser

---

## Use Case Recommendations

### Use JSON When:

- Building APIs or web services
- Need maximum compatibility
- Working with JavaScript-heavy projects
- Generating files programmatically
- Team is unfamiliar with TOML

### Use TOML When:

- Creating configuration files
- Translations will be manually edited
- Readability is a priority
- Working with modern tooling
- Want cleaner diffs in version control

---

## Migration Example

### Before (JSON)

```json
{
  "greeting": {
    "variants": {
      "default": {
        "value": "Hello",
        "variables": []
      },
      "name": {
        "value": "Hello, {{name}}!",
        "variables": ["name"]
      }
    }
  }
}
```

### After (TOML)

```toml
[greeting.variants.default]
value = "Hello"
variables = []

[greeting.variants.name]
value = "Hello, {{name}}!"
variables = ["name"]
```

### Migration Code

```typescript
import {
  JSONFileWriter,
  TOMLFileWriter,
  NodeFileSystemManager,
} from "@i18n-bakery/baker";

async function convertJsonToToml(jsonPath: string, tomlPath: string) {
  const fsManager = new NodeFileSystemManager();
  const jsonWriter = new JSONFileWriter(fsManager);
  const tomlWriter = new TOMLFileWriter(fsManager);

  // Read JSON content
  const content = await jsonWriter.read(jsonPath);

  if (content) {
    // Write as TOML
    await tomlWriter.write(tomlPath, content);
    console.log(`✅ Converted ${jsonPath} → ${tomlPath}`);
  }
}
```

---

## Conclusion

Both formats are fully supported in i18n-bakery. Choose based on your project's needs:

- **JSON**: Maximum compatibility, API-friendly
- **TOML**: Better readability, human-friendly

Both formats:

- ✅ Support all i18n-bakery features
- ✅ Maintain data integrity
- ✅ Have zero external dependencies
- ✅ Include security features
- ✅ Are production-ready
